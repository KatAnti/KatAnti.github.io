var feedback=document.querySelector(".feedback"),popup=document.querySelector(".feedback_popup"),overlay=document.querySelector(".feedback_popup_overlay"),close=document.querySelector(".close_popup"),fio=popup.querySelector("[name=fio]"),question=popup.querySelector("[name=question]"),email=popup.querySelector("[name=email]"),fio_label=popup.querySelector(".fio_label"),question_label=popup.querySelector(".question_label"),email_label=popup.querySelector(".email_label"),storage_name=localStorage.getItem("name"),
storage_email=localStorage.getItem("email");feedback.addEventListener("click",function(a){a.preventDefault();popup.classList.add("feedback_popup_show");overlay.classList.add("overlay_show");storage_name&&storage_email?(fio.value=storage_name,email.value=storage_email,question.focus()):fio.focus()});close.addEventListener("click",function(a){a.preventDefault();popup.classList.remove("feedback_popup_show");overlay.classList.remove("overlay_show");popup.classList.remove("modal-error")});
popup.addEventListener("submit",function(a){fio.value&&email.value&&question.value?(localStorage.setItem("name",fio.value),localStorage.setItem("email",email.value)):(a.preventDefault(),popup.classList.remove("feedback_popup_error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback_popup_error"))});
window.addEventListener("keydown",function(a){27===a.keyCode&&popup.classList.contains("feedback_popup_show")&&overlay.classList.contains("overlay_show")&&(popup.classList.remove("feedback_popup_show"),overlay.classList.remove("overlay_show"),popup.classList.remove("modal-error"))});
overlay.addEventListener("click",function(a){popup.classList.contains("feedback_popup_show")&&overlay.classList.contains("overlay_show")&&(popup.classList.remove("feedback_popup_show"),overlay.classList.remove("overlay_show"),popup.classList.remove("modal-error"))});function addLabel(a,b){a.value&&b.classList.add("popup_label_value")}fio.addEventListener("change",function(a){addLabel(fio,fio_label)});email.addEventListener("change",function(a){addLabel(email,email_label)});
question.addEventListener("change",function(a){addLabel(question,question_label)});